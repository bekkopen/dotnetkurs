<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>.NET introduksjonskurs by bekkopen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">.NET introduksjonskurs</h1>
      <h2 class="project-tagline">Bootcamp 2015</h2>
      <a href="https://github.com/bekkopen/dotnetkurs" class="btn">View on GitHub</a>
      <a href="https://github.com/bekkopen/dotnetkurs/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/bekkopen/dotnetkurs/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="del-1---net--c" class="anchor" href="#del-1---net--c" aria-hidden="true"><span class="octicon octicon-link"></span></a>Del 1 - .NET &amp; C#</h1>

<h2>
<a id="oppgave-1--hello-world" class="anchor" href="#oppgave-1--hello-world" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 1 – Hello World</h2>

<p>Den første oppgaven er temmelig enkel:
Lag en "Hello World"-applikasjon.</p>

<h2>
<a id="oppgave-2--personer" class="anchor" href="#oppgave-2--personer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 2 – Personer</h2>

<p>Vår applikasjon vil omhandle personer. Disse personene har egenskaper som navn, alder, hårfarge, høyde og kjønn. Disse egenskapene skal registreres. En persons alder kan ikke være mindre enn 0.</p>

<p>Lag en klasse med properties som reflekterer dette. Du kan gjerne overskrive ToString-metoden. Den vil bli brukt i en senere oppgave.</p>

<h2>
<a id="oppgave-3--log" class="anchor" href="#oppgave-3--log" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 3 – Log</h2>

<p>Kunden vår ønsker å ha mulighet til å logge hendelser.</p>

<p>Lag en metode på person-klassen som logger utsagn til konsollet (Console.WriteLine()). Metoden skal logge ett eller flere utsagn om gangen. Hvert utsagn skal prefikses med personens navn.  (Bonuspoeng til de som klarer å legge til et default utsagn: ”Blah blah blah..” )</p>

<p>Eksempellogg:</p>

<pre><code>Starter loggen…

Kanye: “I feel like I'm too busy writing history to read it.”
Kanye: “I don't even listen to rap. My apartment is too nice to listen to rap in.”
</code></pre>

<h2>
<a id="oppgave-4--enums" class="anchor" href="#oppgave-4--enums" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 4 – Enums</h2>

<p>Kunden vår holder oppsikt med et stort antall personer. Det er ikke alltid alle oppfører seg like fint, og kunden vil ha mulighet til å registrere hvorvidt en person oppfører seg bra eller dårlig. Kunden har dessverre ikke full oversikt, så systemet må også ha mulighet for å registrere at oppførselen er ukjent. Begynn derfor denne oppgaven med å lage en enum som gjenspeiler dette.</p>

<p>Opprett en property på personobjektet som kan lagre en persons oppførsel.</p>

<h2>
<a id="oppgave-5--liste-av-personer" class="anchor" href="#oppgave-5--liste-av-personer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 5 – Liste av personer</h2>

<p>Med vår nye kunnskap ser vi at deler av systemet kan forenkles. Benytt object initializers til å opprette en array med personer. Se forslag til testpersoner under:</p>

<table>
<thead>
<tr>
<th>Navn</th>
<th>Alder</th>
<th>Hårfarge</th>
<th>Høyde</th>
<th>Tilbøyelighet</th>
<th>Kjønn</th>
</tr>
</thead>
<tbody>
<tr>
<td>Patrick Bateman</td>
<td>27</td>
<td>Brun</td>
<td>184cm</td>
<td>Ond</td>
<td>M</td>
</tr>
<tr>
<td>Mystique</td>
<td>127</td>
<td>Rød</td>
<td>177cm</td>
<td>Ond</td>
<td>K</td>
</tr>
<tr>
<td>Two Face</td>
<td>58</td>
<td>Brun</td>
<td>183cm</td>
<td>Ond</td>
<td>M</td>
</tr>
<tr>
<td>Cruella De Vil</td>
<td>65</td>
<td>Svart og Hvitt</td>
<td>168cm</td>
<td>Ond</td>
<td>K</td>
</tr>
<tr>
<td>Orochimaru</td>
<td>100</td>
<td>Svart</td>
<td>180cm</td>
<td>Ond</td>
<td>M</td>
</tr>
<tr>
<td>Harvey Dent</td>
<td>56</td>
<td>Brun</td>
<td>183cm</td>
<td>God</td>
<td>M</td>
</tr>
<tr>
<td>Kong Harald</td>
<td>78</td>
<td>Ukjent</td>
<td>150cm</td>
<td>God</td>
<td>M</td>
</tr>
</tbody>
</table>

<p>Kunden ønsker å få skrevet ut en liste over alle personene som er registrert i systemet.
Iterer igjennom personene i registeret og kall ToString-metoden på hvert personobjekt.</p>

<h2>
<a id="oppgave-6--filtrering" class="anchor" href="#oppgave-6--filtrering" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 6 – Filtrering</h2>

<p>Nå som dere har bygget litt kompetanse ønsker kunden å få se noen reelle resultater.
Personer som har svart hår eller er over 100 år gamle er klart mistenkelige. Kunden vil gjerne ha en utskrift over disse personene så snart som mulig.</p>

<p>Bruk LINQ til å hente ut en liste over disse personene.</p>

<h2>
<a id="oppgave-7--group-by" class="anchor" href="#oppgave-7--group-by" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 7 – Group by</h2>

<p>Kunden har nok en god dag og er strålende fornøyd. Nå som han har fått gjennomslag for såpass mye ny funksjonalitet så ønsker han å fortsette å utvikle systemet. </p>

<p>Kunden ønsker seg en oversikt over personene som er registrert i systemet fordelt etter tilbøyelighet.
Ta utgangspunkt i lista fra forrige oppgave og grupper på tilbøyelighet. Skriv ut grupperingene.
Eksempel:</p>

<pre><code>Eeevil:
    Hans
    Gretchen
Good:
    Petter Sprett
    Kristoffer Robin
Dontknow:
    Supermann
</code></pre>

<h2>
<a id="oppgave-8--extension-methods" class="anchor" href="#oppgave-8--extension-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 8 – Extension methods</h2>

<p>Det viser seg at systemet inneholder en del feilregistrerte telefonnumre. I ekstreme tilfeller går systemet ned med en uhåndtert NullReferenceException.</p>

<p>Lag en extension-metode for string-klassen som kan validere telefonnumre. Gi metoden navnet IsValidPhoneNumber. Det holder å sjekke at nummeret er satt, og at det er minst 8 tegn langt.</p>

<h2>
<a id="oppgave-9--lambda-uttrykk" class="anchor" href="#oppgave-9--lambda-uttrykk" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 9 – Lambda-uttrykk</h2>

<p>Array-klassen har en generisk, statisk metode som heter Find. Metoden tar inn et array og et predikat. 
Lag et lambda-uttrykk som returnerer true hvis personen som gis inn er over 80 år.</p>

<p>Benytt Find-metoden sammen med lambdauttrykket for å finne en person i lista som er over 80.</p>

<blockquote>
<p><em>Hint: Et predikat er en delegat som tar inn et objekt og returnerer en boolsk verdi.</em></p>
</blockquote>

<h2>
<a id="oppgave-10--spørreoperatorer" class="anchor" href="#oppgave-10--sp%C3%B8rreoperatorer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 10 – Spørreoperatorer</h2>

<h3>
<a id="oppgave-101-where" class="anchor" href="#oppgave-101-where" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 10.1 Where</h3>

<p>En lokal kiosk har blitt ranet, og ransmannen kom seg unna i en stor rød folkevogn. Opptakene fra kioskens overvåkningskamera viser at raneren var over 1,80 meter høy og vitner hevder han hadde brunt hår. Benytt Where-operatoren til å hente ut en liste over mulige forbrytere.</p>

<h3>
<a id="oppgave-102" class="anchor" href="#oppgave-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 10.2</h3>

<p>Benytt Select-operatoren til å hente ut en array med alle navnene til alle i registeret.</p>

<h3>
<a id="oppgave-103" class="anchor" href="#oppgave-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 10.3</h3>

<p>Gjør om oppgave 10.1 og 10.2 til å bruke extensionmetodene Where og Select som finnes på alle Collections.</p>

<h1>
<a id="del-2--aspnet-mvc" class="anchor" href="#del-2--aspnet-mvc" aria-hidden="true"><span class="octicon octicon-link"></span></a>Del 2 – ASP.NET MVC</h1>

<h2>
<a id="oppgave-1--to-sider-som-lenker-til-hverandre" class="anchor" href="#oppgave-1--to-sider-som-lenker-til-hverandre" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 1 – To sider som lenker til hverandre</h2>

<p>Kunden er fornøyd med registeret og ønsker at flere skal kunne bruke det via web.</p>

<ol>
<li>Opprett en ny ASP.NET Web Application</li>
<li>Velg Empty template</li>
<li>Huk av for MVC under under «Add folders and core references for»</li>
<li>Fjern haken for «Host in the cloud»</li>
</ol>

<p>Legg til to Controllere; Home og Persons. Legg til en Index-action på hver av Controllerne, som returnerer et View. Opprett en link som går fra Home-viewet til Persons-viewet og vice versa.</p>

<h2>
<a id="oppgave-2--utlisting-av-personer" class="anchor" href="#oppgave-2--utlisting-av-personer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 2 – Utlisting av personer</h2>

<p>Kopier Person-klassen fra tidligere oppgaver til Models-mappa i ASP.NET MVC-prosjektet. Gjør Index-Viewet til Persons-Controlleren sterkt typet til en liste av Personer. Gjenbruk koden fra Del 1, Oppgave 5 og send inn disse personene til Viewet. Skriv ut listen av personer i en tabell.</p>

<p>For enkelhetsskyld dropper vi å registrere om en person er ond/god, så du kan fjerne Enum + Property for dette.</p>

<h2>
<a id="oppgave-3--registrere-nye-personer" class="anchor" href="#oppgave-3--registrere-nye-personer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 3 – Registrere nye personer</h2>

<p>Vi har behov for å kunne registrere nye personer i systemet. Lag et nytt Insert View, og en ny Insert Action på Person Controlleren. Viewet burde være sterkt typet til Person-typen. Du må også lage en Insert-action som tar inn en Person, og dekorere den med HttpPost-attributet, for å kunne sende en person til serveren.</p>

<p>Legg til valideringsregler som sørger for at en person må være mellom 0 og 150 år, 0 og 250cm, at navn og kjønn er påkrevd, og at kjønn kun kan være verdiene M eller K (hint: ^[MK]{1}$).</p>

<p>Sett et break-point i Insert-actionen for å sjekke at du får inn et gyldig Person-objekt. Send brukeren tilbake til listen over personer dersom objektet er gyldig.</p>

<h2>
<a id="oppgave-4--registrere-personer-i-database" class="anchor" href="#oppgave-4--registrere-personer-i-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 4 – Registrere personer i database</h2>

<p>For at systemet skal bli virkelig nyttig må vi kunne registrere nye personer i en database. Legg inn SqlCompact og Entity Framework ved hjelp av NuGet:</p>

<pre><code>Install-Package EntityFramework.SqlServerCompact
</code></pre>

<p>EntityFramework.SqlServerCompact er avhengig av Microsoft.SqlServer.Compact og vil automatisk hente og installere denne avhengigheten.</p>

<p>Du må også lage en DbContext-klasse i Model-mappen.</p>

<div class="highlight highlight-c#"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">PersonContext</span> : <span class="pl-k">DbContext</span>
{
    <span class="pl-k">public</span> DbSet&lt;Person&gt; <span class="pl-en">Persons</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}</pre></div>

<p>Nå er du klar til å begynne å bruke databasen. Oppdater Index-Actionen på Persons-Controlleren til å lese alle personene fra databasen ved hjelp av LINQ.</p>

<p>Legg så til en ny Action, Insert og lenke til denne fra Index-Viewet. Bruk innebygget scaffolding til å lage et nytt Insert-View. Legg til en Insert-Action som tar en Person-Model, og som er satt til HTTP POST. Lagre denne i databasen ved hjelp av LINQ, og send brukeren tilbake til oversikten.</p>

<h2>
<a id="oppgave-5--oppdatere-en-eksisterende-person" class="anchor" href="#oppgave-5--oppdatere-en-eksisterende-person" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 5 – Oppdatere en eksisterende person</h2>

<p>Kunden har behov for å kunne oppdatere registrerte personer. Lag en ny Update-Action med View. Lenke til denne fra tabellen med personer, f.eks. ved å legge inn en ny kolonne som heter «Rediger» på slutten av hver rad. Husk å sende inn ID til personen som skal redigeres.</p>

<div class="highlight highlight-cshtml"><pre>&lt;td&gt;@Html.ActionLink(<span class="pl-s"><span class="pl-pds">"</span>Rediger<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Update<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> {Id = person.Id})&lt;/td&gt;</pre></div>

<p>Her må du også ha to Actions som begge heter Update (de <em>må</em> ikke hete det samme, men det er vanlig å gjøre det slik). Den ene tar inn en Id og henter personen som skal redigeres fra databasen og sender ham til Viewet. Den andre tar inn den oppdaterte Personen i en HTTP POST, og lagrer endringene i databasen.</p>

<p>Send brukeren tilbake til oversikten når personen er oppdatert.</p>

<h2>
<a id="oppgave-6--slette-en-eksisterende-person" class="anchor" href="#oppgave-6--slette-en-eksisterende-person" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 6 – Slette en eksisterende person</h2>

<p>Om du har tilgjengelig tid, se om du får til å legge inn funksjonalitet for å slette en person.</p>

<h2>
<a id="oppgave-7--returnere-en-liste-av-personer-som-json" class="anchor" href="#oppgave-7--returnere-en-liste-av-personer-som-json" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 7 – Returnere en liste av personer som JSON</h2>

<p>For å kunne bruke systemet fra flest mulig enheter ønsker kunden ett enkelt web api. Lag en ny Action som returnerer en oversikt over alle kundene som JSON.</p>

<h2>
<a id="oppgave-8--lage-et-ordentlig-web-api" class="anchor" href="#oppgave-8--lage-et-ordentlig-web-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 8 – Lage et ordentlig Web API</h2>

<p>Det viser seg at api-et i forrige oppgave blir for enkelt. Kunden har behov for å kunne svare med JSON til klientene som ønsker dette, XML til de som ønsker det, og på toppen av det hele: URL-ene må være best practice for REST. På tide å bruke ASP.NET Web API.</p>

<blockquote>
<p><em>Hint: Web Api 2 Controller.</em></p>
</blockquote>

<h2>
<a id="oppgave-9--legg-til-rulleblad" class="anchor" href="#oppgave-9--legg-til-rulleblad" aria-hidden="true"><span class="octicon octicon-link"></span></a>Oppgave 9 – Legg til rulleblad</h2>

<p>De slemmeste av skurkene har et langt rulleblad. Kunden ønsker mulighet til å holde rede på disse. Legg til modellen Crime og koble denne opp mot Person-modellen. Crime skal minst ha en dato for når handlingen skjedde og en tekst som beskriver handlingen. Sørg for at URL-en <code>/api/persons/1/crimes</code> returnerer alle kriminelle handlinger for personen med id == 1 osv. Crime-modellen skal også persisteres i databasen på lik linje med Person.</p>

<blockquote>
<p><em>Hint: Databasemigreringer, Route-attributter</em></p>
</blockquote>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/bekkopen/dotnetkurs">.NET introduksjonskurs</a> is maintained by <a href="https://github.com/bekkopen">bekkopen</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
